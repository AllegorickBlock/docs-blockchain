import{_ as s,v as a,b as e,R as o}from"./chunks/framework.a49639fc.js";const C=JSON.parse('{"title":"Cleos Usage","description":"","frontmatter":{"title":"Cleos Usage","deploy":["staging","mainnet"],"order":-9995,"outline":[0,4]},"headers":[],"relativePath":"guides/Docker/cleos.md","filePath":"guides/Docker/cleos.md","lastUpdated":1691492398000}'),n={name:"guides/Docker/cleos.md"},t=o(`<h1 id="cleos-usage" tabindex="-1">Cleos Usage <a class="header-anchor" href="#cleos-usage" aria-label="Permalink to &quot;Cleos Usage&quot;">​</a></h1><p>Cleos is a command line tool that will allow you to interface with various HTTP APIs provided from nodeos instances. Cleos can be used to lookup accounts, deploy contracts, interface with contracts, and much more.</p><h2 id="who-is-it-for" tabindex="-1">Who is it for? <a class="header-anchor" href="#who-is-it-for" aria-label="Permalink to &quot;Who is it for?&quot;">​</a></h2><ul><li>Developers</li><li>Advanced Users</li></ul><h2 id="obtaining-cleos" tabindex="-1">Obtaining Cleos <a class="header-anchor" href="#obtaining-cleos" aria-label="Permalink to &quot;Obtaining Cleos&quot;">​</a></h2><p>We have created a Docker image that has pre-created scripts, tools, and pre-packaged binaries. Cleos is already included inside of the Docker image.</p><p>Individual binaries are not currently available for download.</p><p><a href="./docker-image-usage.html">Docker Image Usage</a></p><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h2><p>Inside the Docker Container the following can be executed for general usage.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--help</span></span></code></pre></div><p>Additional help is supported for all individual options inside of cleos.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wallet</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--help</span></span>
<span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wallet</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--help</span></span>
<span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--help</span></span>
<span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--help</span></span></code></pre></div><h3 id="external-apis" tabindex="-1">External APIs <a class="header-anchor" href="#external-apis" aria-label="Permalink to &quot;External APIs&quot;">​</a></h3><p>If you are using cleos you may find yourself needing to interface with an external API. This can be done with the <code>-u</code> option.</p><p><strong>Example</strong></p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-u</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://someurl.com/xyz/</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eosio</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eosio</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">global</span></span></code></pre></div><h2 id="wallets" tabindex="-1">Wallets <a class="header-anchor" href="#wallets" aria-label="Permalink to &quot;Wallets&quot;">​</a></h2><p>A wallet can be defined as a secure place where private keys can be stored.</p><p>Cleos has its own wallet software called <code>keosd</code> that will assist you with securely storing your private key. This additional piece of software that is packaged with <code>cleos</code> can be used through <code>cleos</code> itself.</p><ul><li>Developers are responsible for backing up their own private keys</li><li>Remember to store your wallet password</li><li>Do not share private keys in public spaces / channels</li></ul><p><em>A wallet may not be stored between sessions while using a Docker Image, ensure you backup any private keys you create if they need to be used again.</em></p><h3 id="basic-usage" tabindex="-1">Basic Usage <a class="header-anchor" href="#basic-usage" aria-label="Permalink to &quot;Basic Usage&quot;">​</a></h3><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wallet</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--help</span></span></code></pre></div><h3 id="wallet-rules" tabindex="-1">Wallet Rules <a class="header-anchor" href="#wallet-rules" aria-label="Permalink to &quot;Wallet Rules&quot;">​</a></h3><ul><li>Multiple wallets can exist</li><li>Multiple wallets can be unlocked at the same time</li><li>Any transaction will automatically scan unlocked wallets for a key with permission to the account</li><li>Accessing a specific wallet requires --name <ul><li>This only applies to wallet based commands with cleos</li></ul></li></ul><h3 id="create-a-wallet" tabindex="-1">Create a Wallet <a class="header-anchor" href="#create-a-wallet" aria-label="Permalink to &quot;Create a Wallet&quot;">​</a></h3><p>Below is the command used to create a wallet and print out a <code>password</code> which you should store somewhere to eventually unlock a wallet. By default a wallet will eventually lock itself over time.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wallet</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--to-console</span></span></code></pre></div><p>A successful creation of the wallet will respond with:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Creating</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wallet:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">default</span></span>
<span class="line"><span style="color:#FFCB6B;">Save</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">password</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">use</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">future</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unlock</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">this</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wallet.</span></span>
<span class="line"><span style="color:#FFCB6B;">Without</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">password</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">imported</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">keys</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">will</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">be</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">retrievable.</span></span>
<span class="line"><span style="color:#FFCB6B;">&quot;SomeReallyLongPassword&quot;</span></span></code></pre></div><h3 id="creating-a-named-wallet" tabindex="-1">Creating a Named Wallet <a class="header-anchor" href="#creating-a-named-wallet" aria-label="Permalink to &quot;Creating a Named Wallet&quot;">​</a></h3><p>There are times a developer may need a specifically named wallet to interface with. You can easily name a wallet with the following command.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wallet</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name=CustomName</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--to-console</span></span></code></pre></div><p>The name chosen will be used for the file name, and the wallet itself.</p><h3 id="unlocking-a-wallet" tabindex="-1">Unlocking a Wallet <a class="header-anchor" href="#unlocking-a-wallet" aria-label="Permalink to &quot;Unlocking a Wallet&quot;">​</a></h3><p>When a wallet is locked it will not allow any cleos based commands that require transacting, setting contracts, etc. to be called. Below is a command that can be used to unlock the wallet.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wallet</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unlock</span></span></code></pre></div><p>After running the command it will prompt you for a password. It may appear like nothing is being written when you type or paste your password (right-click) but actually something is being written.</p><p>A successful unlock will respond with:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Unlocked:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">default</span></span></code></pre></div><h3 id="importing-a-private-key" tabindex="-1">Importing a Private Key <a class="header-anchor" href="#importing-a-private-key" aria-label="Permalink to &quot;Importing a Private Key&quot;">​</a></h3><p>There are two ways to import a private key to your wallet.</p><p>This first version will prompt for a private key to import</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wallet</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">import</span></span></code></pre></div><p>This second version will not prompt the user and will retain the private key in the <code>history</code> command.</p><p>It is <strong>not recommended</strong> to use it, but it could be used for development purposes.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wallet</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--private-key</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">SomePrivateKey</span></span></code></pre></div><h3 id="list-keys" tabindex="-1">List Keys <a class="header-anchor" href="#list-keys" aria-label="Permalink to &quot;List Keys&quot;">​</a></h3><p>No, this does not reveal private keys. Instead, it lists all of your public keys.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wallet</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">keys</span></span></code></pre></div><p>If you do want to list private keys from unlocked wallets the following command can be used.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wallet</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">private_keys</span></span></code></pre></div><h3 id="create-a-key-pair" tabindex="-1">Create a Key Pair <a class="header-anchor" href="#create-a-key-pair" aria-label="Permalink to &quot;Create a Key Pair&quot;">​</a></h3><p>The following command will print a private and public key to console without importing it into the wallet.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--to-console</span></span></code></pre></div><p>To import a key on creation, then the following command will suffice.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wallet</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create_key</span></span></code></pre></div><h3 id="wallet-infinite-unlock" tabindex="-1">Wallet Infinite Unlock <a class="header-anchor" href="#wallet-infinite-unlock" aria-label="Permalink to &quot;Wallet Infinite Unlock&quot;">​</a></h3><p>If you find a need for a wallet that almost never locks itself then seek the following page:</p><p><a href="./keosd.html#wallet-infinite-unlock">keosd - Infinite Unlock</a></p><h2 id="accounts" tabindex="-1">Accounts <a class="header-anchor" href="#accounts" aria-label="Permalink to &quot;Accounts&quot;">​</a></h2><p>Accounts can be created in a variety of ways but it is important to understand that on the Ultra Blockchain a non-eba account is necessary to deploy smart contracts.</p><p>Meaning, developers who wish <strong>to deploy a smart contract</strong> on the production network must contact Ultra and <strong>obtain a non-eba account.</strong></p><h3 id="account-rules" tabindex="-1">Account Rules <a class="header-anchor" href="#account-rules" aria-label="Permalink to &quot;Account Rules&quot;">​</a></h3><p>Account names are automatically generated sequentially based on previous name. Developers are not required to provide a name for an account, developers are given one.</p><p><em>Requires system contracts to be deployed, and applies on staging and production networks.</em></p><h3 id="name-type-rules" tabindex="-1">Name Type Rules <a class="header-anchor" href="#name-type-rules" aria-label="Permalink to &quot;Name Type Rules&quot;">​</a></h3><p>There are rules with using the <code>eosio::name</code> type and account names.</p><ul><li>Can be up to 12 character(s)</li><li>Must only contain digits 1-5</li><li>Must only contains letters a-z</li><li>Must be lowercase only</li></ul><p><em>Developers are unable to choose their name on staging and production networks.</em></p><h3 id="resource-information" tabindex="-1">Resource Information <a class="header-anchor" href="#resource-information" aria-label="Permalink to &quot;Resource Information&quot;">​</a></h3><p>You do not need to have UOS in the account to deploy smart contracts, or do general transactions. This is all shared through Ultra&#39;s POWER system which splits resources amongst multiple accounts as they are created.</p><p>This being said, you will need RAM in order to deploy a smart contract. You may acquire RAM during the account creation process, from the RAM market, or by creating an unlimited account which has no RAM limitations.</p><h3 id="accounts-for-staging-network-production-network" tabindex="-1">Accounts for Staging Network &amp; Production Network <a class="header-anchor" href="#accounts-for-staging-network-production-network" aria-label="Permalink to &quot;Accounts for Staging Network &amp; Production Network&quot;">​</a></h3><p>However, <strong>a non-eba account is necessary for deploying smart contracts.</strong> This can only be obtained by going through Ultra.</p><p>In a local network a developer has full control over how accounts are created, and when they can be created. Refer to the instructions below to use <code>cleos</code> to create accounts.</p><h3 id="creating-an-account" tabindex="-1">Creating an Account <a class="header-anchor" href="#creating-an-account" aria-label="Permalink to &quot;Creating an Account&quot;">​</a></h3><p>This applies when you have a system contract deployed to the chain, and need to create an account.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">system</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">newaccount</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ultra.eosio</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">accountname</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">SomePublicKey</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--transfer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--gift-ram-kbytes</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1024000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ultra.eosio</span></span></code></pre></div><p>This permission is inaccessible on staging and production networks.</p><p><em>Note: Using the <code>ultra.eosio</code> permission should be possible when launching the chain with the javascript framework included in the image.</em></p><h3 id="creating-a-non-eba-account" tabindex="-1">Creating a Non-EBA Account <a class="header-anchor" href="#creating-a-non-eba-account" aria-label="Permalink to &quot;Creating a Non-EBA Account&quot;">​</a></h3><p>Allow user to create new non-EBA account when the system contract is deployed, with expected cost should not be larger than max payment. Cost calculation will base on config from newactconfig. All names will be auto generated on chain with format of <code>1aa2aa3aa4aa</code> with <code>a</code> as an alphabet character.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">action</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eosio</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">newnonebact</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">{&quot;creator&quot;:&quot;alice&quot;, &quot;owner&quot;:{&quot;threshold&quot;:1,&quot;keys&quot;:[{&quot;key&quot;:&quot;EOS7i1PgEe399sjbhhS6umNFU6okzit96chj8NtpBRzy6XpDYXUH9&quot;,&quot;weight&quot;:1}],&quot;accounts&quot;:[],&quot;waits&quot;:[]}, &quot;active&quot;:{&quot;threshold&quot;:1,&quot;keys&quot;:[{&quot;key&quot;:&quot;EOS7i1PgEe399sjbhhS6umNFU6okzit96chj8NtpBRzy6XpDYXUH9&quot;,&quot;weight&quot;:1}],&quot;accounts&quot;:[],&quot;waits&quot;:[]}, &quot;max_payment&quot;:&quot;1.00000000 UOS&quot;}</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">alice</span></span></code></pre></div><h3 id="accessing-account-info" tabindex="-1">Accessing Account Info <a class="header-anchor" href="#accessing-account-info" aria-label="Permalink to &quot;Accessing Account Info&quot;">​</a></h3><p>Once an account is created you can check if it exists on chain by performing a <code>get</code> against the account.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">cleos get account accountname</span></span></code></pre></div><h3 id="updating-account-permissions" tabindex="-1">Updating Account Permissions <a class="header-anchor" href="#updating-account-permissions" aria-label="Permalink to &quot;Updating Account Permissions&quot;">​</a></h3><p>Account permissions can be incredibly complex at times depending on the needs of the permission structure.</p><p>Please keep in mind that the <code>eosio</code> account must have the <code>eosio.system</code> contract deployed to to the account in order to use this functionality.</p><p><strong>Basic Permission Hierarchy</strong></p><p>Almost all accounts that are created always have the same permission structure by default.</p><ul><li>owner <ul><li>The highest permission</li></ul></li><li>active <ul><li>The lowest permission</li></ul></li></ul><p><em>To change active permission we need permission of the owner permission</em></p><p><strong>Permission Structure</strong></p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">threshold</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">accounts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">permission</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">actor</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">anotheracc1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">permission</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">active</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">weight</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">keys</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">SomePublicKey</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">weight</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">waits</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p><strong>Explanation of Permission Structure</strong></p><p>The above structure may look quite complex, but this can be broken down.</p><ul><li>threshold <ul><li>Threshold determines how many signatures are needed from both the keys, and accounts section to fulfill this permission we are creating.</li><li>If we set threshold to 2 and we have 2 keys listed, then we need to use the multi-signature protocol to fulfill any actions using this permission.</li></ul></li><li>accounts <ul><li>This is a list of accounts that can be used to fulfill the permission we are creating.</li><li>This means that multiple accounts can be chained together.</li><li>There is no limit to the amount of accounts we can add to this array.</li><li>weight <ul><li>This determines how much is given to the threshold when this specific account signs a transaction. If we set the weight to 2 and we need a threshold of 2, this one account can completely fulfill the threshold necessary to sign a transaction.</li></ul></li></ul></li><li>keys <ul><li>This is a list of keys that can be used to fulfill the permission we are creating.</li><li>This means that maybe you and a friend, or a bunch of other people can all put their keys under this one specific permission. You can then have any of the keys sign on behalf of this permission to meet the threshold.</li><li>There is no limit to the amount of keys we add to this array.</li><li>weight <ul><li>Same as the &#39;weight&#39; written above in the accounts section.</li></ul></li></ul></li></ul><p>When all adjustments are made to the above structure we can <code>stringify</code> the json structure to pass it through cleos.</p><p><strong>Pushing the Update Auth</strong></p><p>Keep in mind that updating authorization will require the permission above the permission we are modifying. Example being if we are modifying the <code>active</code> permission we need the <code>owner</code> permission to do so.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">account</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">permission</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">account1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">active</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">{&quot;threshold&quot;:1,&quot;accounts&quot;:[{&quot;permission&quot;:{&quot;actor&quot;:&quot;anotheracc1&quot;,&quot;permission&quot;:&quot;active&quot;},&quot;weight&quot;:1}],&quot;keys&quot;:[{&quot;key&quot;:&quot;SomePublicKey&quot;,&quot;weight&quot;:1}],&quot;waits&quot;:[]}</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">account1@owner</span></span></code></pre></div><h3 id="updating-account-link-authorization" tabindex="-1">Updating Account Link Authorization <a class="header-anchor" href="#updating-account-link-authorization" aria-label="Permalink to &quot;Updating Account Link Authorization&quot;">​</a></h3><p>Preface, <code>linkauth</code> allows a specific <code>account permission</code> to be linked to a specific smart contract&#39;s <code>action</code>. This will allow only that specific permission under the account to interface with a smart contract <code>action</code>.</p><p>In short, if a permission is created for an account that has a public key that is used inside of an application it is better to only have that permission interface with very specific actions. This prevents potential vulnerabilities when creating applications that interface with the blockchain.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">action</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eosio</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linkauth</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[&quot;someaccount&quot;,&quot;eosio.token&quot;,&quot;transfer&quot;, &quot;somepermission&quot;]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">someaccount</span></span></code></pre></div><h3 id="code-based-permissions" tabindex="-1">Code Based Permissions <a class="header-anchor" href="#code-based-permissions" aria-label="Permalink to &quot;Code Based Permissions&quot;">​</a></h3><p>The <code>eosio.code</code> permission will allow a smart contract to call other smart contracts to invoke other actions.</p><p>The best example of this is creating a smart contract that requires funds to be transfered from the contract account to the user account without the contract account&#39;s direct permission.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">account</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">permission</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">contractaccount</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">active</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--add-code</span></span></code></pre></div><h2 id="contract-deployment" tabindex="-1">Contract Deployment <a class="header-anchor" href="#contract-deployment" aria-label="Permalink to &quot;Contract Deployment&quot;">​</a></h2><p>Smart contracts allow accounts to interact with an <code>action</code> inside of a compiled smart contract that runs specific code to create a result.</p><p>Deploying a compiled smart contract is how developers, and users alike will interface with the blockchain.</p><p>An example of a smart contract would be the <code>eosio.token</code> contract that also has the <code>transfer</code> action. This allows users to transfer the native token between accounts.</p><h3 id="restrictions" tabindex="-1">Restrictions <a class="header-anchor" href="#restrictions" aria-label="Permalink to &quot;Restrictions&quot;">​</a></h3><p><strong>This does not apply to local networks, you can bypass this through other scripts</strong>.</p><p>By default <code>ultra</code> requires KYB (Know Your Business) before any business or individual user can deploy smart contracts to their test network or the main network.</p><p>This is a manual process and the following following must be done:</p><ol><li><p>Generate two key pairs, one each for your OWNER and ACTIVE permissions.</p></li><li><p>These key pairs must be securely saved locally.</p></li><li><p>Send the public keys to Ultra</p></li><li><p>Ultra will generate a non-EBA account and revert with the account name</p></li></ol><p>Contact an Ultra representative through Telegram for more information.</p><h3 id="deploying-a-smart-contract" tabindex="-1">Deploying a Smart Contract <a class="header-anchor" href="#deploying-a-smart-contract" aria-label="Permalink to &quot;Deploying a Smart Contract&quot;">​</a></h3><p>At this stage it is assumed that a <code>wasm</code> and <code>abi</code> file have been created to deploy the smart contract.</p><p>Assume the following file structure:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">contractA\\</span></span>
<span class="line"><span style="color:#A6ACCD;">  |- contractA.wasm</span></span>
<span class="line"><span style="color:#A6ACCD;">  |- contractA.abi</span></span></code></pre></div><p><em>Note: The folder, and files must have the same name.</em></p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">contract</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">someaccount</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./contractA</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">someaccount@active</span></span></code></pre></div><p>The chain should reply that you have deployed your contract successfully.</p><h2 id="transactions" tabindex="-1">Transactions <a class="header-anchor" href="#transactions" aria-label="Permalink to &quot;Transactions&quot;">​</a></h2><p>A transaction can be defined as a way to call a specific function in a smart contract that will run some code on-chain and create a result on-chain.</p><h3 id="pushing-a-transaction" tabindex="-1">Pushing a Transaction <a class="header-anchor" href="#pushing-a-transaction" aria-label="Permalink to &quot;Pushing a Transaction&quot;">​</a></h3><p>If all permissions are correct, and you are interacting with a smart contract the following example should be sufficient for interacting with most smart contracts.</p><p>Assume the following action in <code>C++</code>.</p><div class="language-cpp"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// Notice how usera is parameter 1, and userb is parameter 2 in the array in the example below. This is how all actions are interfaced with.</span></span>
<span class="line"><span style="color:#89DDFF;">[[</span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">action</span><span style="color:#89DDFF;">]]</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">usera</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">userb</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hello to, </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> usera</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hello to, </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> userb</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>We have to pass two parameters to our action: <code>usera</code>, and <code>userb</code>. Both of which are account names.</p><p>Assume the account the contract is deployed under is <code>hello</code>.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">action</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">hello</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[&quot;acc1&quot;, &quot;acc2&quot;]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">someaccount</span></span></code></pre></div><p>This will push the action, and we should recieve some output back from the action.</p><p>Here is another example with the <code>eosio.token</code> account and <code>transfer</code> action.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">action</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eosio.token</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transfer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[&quot;acc1&quot;, &quot;someaccount&quot;, &quot;4.00000000 UOS&quot;, &quot;some transfer&quot;]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">someaccount</span></span></code></pre></div><p>Upon successful transaction it will return a unique identifier which can be used to fetch that transaction with <code>cleos get transaction</code>.</p><h2 id="get-data" tabindex="-1">Get Data <a class="header-anchor" href="#get-data" aria-label="Permalink to &quot;Get Data&quot;">​</a></h2><p>Cleos allows for a lot of utility as far as getting data from the chain. Anything from token balances, tables, and even account information is fair game with this tool.</p><h3 id="usage-1" tabindex="-1">Usage <a class="header-anchor" href="#usage-1" aria-label="Permalink to &quot;Usage&quot;">​</a></h3><p>See the full capabilities of <code>get</code> with the command below.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--help</span></span></code></pre></div><h3 id="accounts-1" tabindex="-1">Accounts <a class="header-anchor" href="#accounts-1" aria-label="Permalink to &quot;Accounts&quot;">​</a></h3><p>Get all account information, and permissions.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">account</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">someaccount</span></span></code></pre></div><h3 id="tables" tabindex="-1">Tables <a class="header-anchor" href="#tables" aria-label="Permalink to &quot;Tables&quot;">​</a></h3><p>Tables are defined inside of smart contracts. This section will cover how to fetch data from a table, and not how to write to a table. Smart contract actions often write to tables automatically, and the scope of writing to a table will not be covered in this section.</p><p>Tables are based on a specific format which revolves around <code>contract</code>, <code>scope (account_name)</code> and <code>table_name</code>.</p><p>Example of retrieving data from the global eosio table.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eosio</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eosio</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">global</span></span></code></pre></div><h3 id="understanding-scope" tabindex="-1">Understanding Scope <a class="header-anchor" href="#understanding-scope" aria-label="Permalink to &quot;Understanding Scope&quot;">​</a></h3><p>A scope for a table serves as an indexing key. It may be a variation of types ranging from <code>uint8</code> to <code>checksum256</code> (sha256 hash). It is most commonly a <code>name</code> type, as quite often tables are scoped to an account name.</p><p>A good example of how scope may be used for easy retrieval of stored information would be for a chess contract.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">cleos get table chess &lt;GAME_ID&gt; turns</span></span></code></pre></div><p>Or even a way to get the games a user is participating in</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">cleos get table chess &lt;USER_ID&gt; games</span></span></code></pre></div><p>The definition of how a scope is used is decided at the smart contract level but it is important to understand that this is an option for tables when fetching their individual data.</p><h3 id="transaction" tabindex="-1">Transaction <a class="header-anchor" href="#transaction" aria-label="Permalink to &quot;Transaction&quot;">​</a></h3><p>Transactions can be fetched through their unique identifier.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transaction</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">someuid</span></span></code></pre></div><h3 id="block" tabindex="-1">Block <a class="header-anchor" href="#block" aria-label="Permalink to &quot;Block&quot;">​</a></h3><p>Blocks can be fetched through their individual block number.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cleos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">block</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">25</span></span></code></pre></div><h2 id="closing-remarks" tabindex="-1">Closing Remarks <a class="header-anchor" href="#closing-remarks" aria-label="Permalink to &quot;Closing Remarks&quot;">​</a></h2><p>Cleos is a powerful command line tool that has near infinite use cases for developers and advanced users alike. It is worth exploring every option through <code>--help</code> and above we have covered some of the most used command line options that the blockchain team at Ultra uses on a near daily basis.</p>`,170),l=[t];function p(c,r,i,h,u,y){return a(),e("div",null,l)}const D=s(n,[["render",p]]);export{C as __pageData,D as default};
