import{_ as s,v as n,b as a,R as l}from"./chunks/framework.a49639fc.js";const C=JSON.parse('{"title":"eosio.token example contract","description":"","frontmatter":{"title":"eosio.token example contract","deploy":["staging","mainnet"],"outline":[0,4]},"headers":[],"relativePath":"examples/eosio.token.md","filePath":"examples/eosio.token.md","lastUpdated":1697665158000}'),o={name:"examples/eosio.token.md"},p=l(`<h1 id="token-contract" tabindex="-1">Token Contract <a class="header-anchor" href="#token-contract" aria-label="Permalink to &quot;Token Contract&quot;">​</a></h1><h2 id="src-eosio-token-cpp" tabindex="-1">src/eosio.token.cpp <a class="header-anchor" href="#src-eosio-token-cpp" aria-label="Permalink to &quot;src/eosio.token.cpp&quot;">​</a></h2><div class="language-cpp"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">#include</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">eosio.token/eosio.token.hpp</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">eosio</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">token</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">create</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;">   </span><span style="color:#A6ACCD;font-style:italic;">issuer</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">                    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">asset</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;">  </span><span style="color:#A6ACCD;font-style:italic;">maximum_supply</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">require_auth</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">get_self</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">auto</span><span style="color:#F07178;"> sym </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">maximum_supply</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">is_valid</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">invalid symbol name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">maximum_supply</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">is_valid</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">invalid supply</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">maximum_supply</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">amount</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">max-supply must not be negative</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span><span style="color:#676E95;font-style:italic;"> // ultra-duncan --- support for unlimitted max supply</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    stats </span><span style="color:#82AAFF;">statstable</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">get_self</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">code</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">auto</span><span style="color:#F07178;"> existing </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">statstable</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">code</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> existing </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">statstable</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">end</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">token with symbol already exists</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">statstable</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">emplace</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">get_self</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[&amp;](</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">auto&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">s</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">supply</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">maximum_supply</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">max_supply</span><span style="color:#F07178;">    </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> maximum_supply</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">issuer</span><span style="color:#F07178;">        </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> issuer</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">token</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">issue</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">to</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">asset</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">quantity</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">memo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">auto</span><span style="color:#F07178;"> sym </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">quantity</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">is_valid</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">invalid symbol name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">memo</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">size</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">256</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">memo has more than 256 bytes</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    stats </span><span style="color:#82AAFF;">statstable</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">get_self</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">code</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">auto</span><span style="color:#F07178;"> existing </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">statstable</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">code</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> existing </span><span style="color:#89DDFF;">!=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">statstable</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">end</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">token with symbol does not exist, create token before issue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">auto</span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> st </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;">existing</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> to </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">st</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">issuer</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">tokens can only be issued to issuer account</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">require_auth</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">st</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">issuer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">quantity</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">is_valid</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">invalid quantity</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">quantity</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">amount</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">must issue positive quantity</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">quantity</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">st</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">supply</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">symbol precision mismatch</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // ultra-duncan --- support for unlimitted max supply</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">st</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">max_supply</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">amount</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">quantity</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">amount</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">st</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">max_supply</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">amount</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">st</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">supply</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">amount</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">quantity exceeds available supply</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">statstable</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">modify</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> st</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> same_payer</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[&amp;](</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">auto&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">s</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">supply</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+=</span><span style="color:#F07178;"> quantity</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">add_balance</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">st</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">issuer</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> quantity </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">token</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">retire</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">asset</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">quantity</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">memo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">auto</span><span style="color:#F07178;"> sym </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">quantity</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">is_valid</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">invalid symbol name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">memo</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">size</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">256</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">memo has more than 256 bytes</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    stats </span><span style="color:#82AAFF;">statstable</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">get_self</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">code</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">auto</span><span style="color:#F07178;"> existing </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">statstable</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">code</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> existing </span><span style="color:#89DDFF;">!=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">statstable</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">end</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">token with symbol does not exist</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">auto</span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> st </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;">existing</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">require_auth</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">st</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">issuer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">quantity</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">is_valid</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">invalid quantity</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">quantity</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">amount</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">must retire positive quantity</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">quantity</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">st</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">supply</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">symbol precision mismatch</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">statstable</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">modify</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> st</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> same_payer</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[&amp;](</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">auto&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">s</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">supply</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-=</span><span style="color:#F07178;"> quantity</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">sub_balance</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">st</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">issuer</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> quantity </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">token</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">transfer</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;">    </span><span style="color:#A6ACCD;font-style:italic;">from</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">                      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;">    </span><span style="color:#A6ACCD;font-style:italic;">to</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">                      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">asset</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;">   </span><span style="color:#A6ACCD;font-style:italic;">quantity</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">                      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;">  </span><span style="color:#A6ACCD;font-style:italic;">memo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> from </span><span style="color:#89DDFF;">!=</span><span style="color:#F07178;"> to</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cannot transfer to self</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">require_auth</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> from </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">is_account</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> to </span><span style="color:#89DDFF;">),</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">to account does not exist</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">auto</span><span style="color:#F07178;"> sym </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">quantity</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">code</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#F07178;">    stats </span><span style="color:#82AAFF;">statstable</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">get_self</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">auto</span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> st </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">statstable</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">require_recipient</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> from </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">require_recipient</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> to </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">quantity</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">is_valid</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">invalid quantity</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">quantity</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">amount</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">must transfer positive quantity</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">quantity</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">st</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">supply</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">symbol precision mismatch</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">memo</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">size</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">256</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">memo has more than 256 bytes</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">sub_balance</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> from</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> quantity </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">add_balance</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> to</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> quantity </span><span style="color:#89DDFF;">);</span><span style="color:#676E95;font-style:italic;"> // ultra-duncan --- UB-474: support new eosio.token standard</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">token</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">sub_balance</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">owner</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">asset</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">   accounts </span><span style="color:#82AAFF;">from_acnts</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">get_self</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">owner</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">auto</span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> from </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">from_acnts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">code</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">no balance object found</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">from</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">balance</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">amount</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">amount</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">overdrawn balance</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#A6ACCD;">from_acnts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">modify</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> from</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> same_payer</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[&amp;](</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">auto&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">balance</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-=</span><span style="color:#F07178;"> value</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ultra-duncan --- UB-474: support new eosio.token standard</span></span>
<span class="line"><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">token</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">add_balance</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">owner</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">asset</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">   accounts </span><span style="color:#82AAFF;">to_acnts</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">get_self</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">owner</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">auto</span><span style="color:#F07178;"> to </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">to_acnts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">code</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> to </span><span style="color:#89DDFF;">!=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">to_acnts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">end</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">owner</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">to_string</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> to account balance does not exist</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#A6ACCD;">to_acnts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">modify</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> to</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> same_payer</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[&amp;](</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">auto&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">balance</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+=</span><span style="color:#F07178;"> value</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">token</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">open</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">owner</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">symbol</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">symbol</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">ram_payer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#82AAFF;">require_auth</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> ram_payer </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">is_account</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> owner </span><span style="color:#89DDFF;">),</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">owner account does not exist</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">auto</span><span style="color:#F07178;"> sym_code_raw </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">code</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#F07178;">   stats </span><span style="color:#82AAFF;">statstable</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">get_self</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> sym_code_raw </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">auto</span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> st </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">statstable</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> sym_code_raw</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">symbol does not exist</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">st</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">supply</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> symbol</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">symbol precision mismatch</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">   accounts </span><span style="color:#82AAFF;">acnts</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">get_self</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">owner</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">auto</span><span style="color:#F07178;"> it </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">acnts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> sym_code_raw </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> it </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">acnts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">end</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">acnts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">emplace</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> ram_payer</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[&amp;](</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">auto&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">balance</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> asset</span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> symbol</span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">token</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">owner</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">symbol</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">symbol</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#82AAFF;">require_auth</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> owner </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">   accounts </span><span style="color:#82AAFF;">acnts</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">get_self</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">owner</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">auto</span><span style="color:#F07178;"> it </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">acnts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">code</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> it </span><span style="color:#89DDFF;">!=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">acnts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">end</span><span style="color:#89DDFF;">(),</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Balance row already deleted or never existed. Action won&#39;t have any effect.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#82AAFF;">check</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">it</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;">balance</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">amount</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Cannot close because the balance is not zero.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#A6ACCD;">acnts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">erase</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> it </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#676E95;font-style:italic;"> /// namespace eosio</span></span></code></pre></div><h2 id="include-eosio-token-eosio-token-hpp" tabindex="-1">include/eosio.token/eosio.token.hpp <a class="header-anchor" href="#include-eosio-token-eosio-token-hpp" aria-label="Permalink to &quot;include/eosio.token/eosio.token.hpp&quot;">​</a></h2><div class="language-cpp"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">#pragma</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">once</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">#include</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">eosio/asset.hpp</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">#include</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">eosio/eosio.hpp</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">#include</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">eosiosystem</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">class</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">system_contract</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">eosio</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#F78C6C;">using</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">std</span><span style="color:#89DDFF;">::</span><span style="color:#F07178;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   /**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    * eosio.token contract defines the structures and actions that allow users to create, issue, and manage</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    * tokens on EOSIO based blockchains.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    */</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">class</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[[</span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">contract</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">eosio.token</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">]]</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">token</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">public</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">contract</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">public</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#F78C6C;">using</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">contract</span><span style="color:#89DDFF;">::</span><span style="color:#F07178;">contract</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         /**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * Allows \`issuer\` account to create a token in supply of \`maximum_supply\`. If validation is successful a new entry in statstable for token symbol scope gets created.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">issuer</span><span style="color:#676E95;font-style:italic;"> - the account that creates the token,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">maximum_supply</span><span style="color:#676E95;font-style:italic;"> - the maximum supply set for the token created.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@pre</span><span style="color:#676E95;font-style:italic;"> Token symbol has to be valid,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@pre</span><span style="color:#676E95;font-style:italic;"> Token symbol must not be already created,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@pre</span><span style="color:#676E95;font-style:italic;"> maximum_supply has to be smaller than the maximum supply allowed by the system: 1^62 - 1.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@pre</span><span style="color:#676E95;font-style:italic;"> Maximum supply must be positive;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          */</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;">[[</span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">action</span><span style="color:#89DDFF;">]]</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">create</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;">   </span><span style="color:#A6ACCD;font-style:italic;">issuer</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">                      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">asset</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;">  </span><span style="color:#A6ACCD;font-style:italic;">maximum_supply</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         /**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          *  This action issues to \`to\` account a \`quantity\` of tokens.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">to</span><span style="color:#676E95;font-style:italic;"> - the account to issue tokens to, it must be the same as the issuer,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">quntity</span><span style="color:#676E95;font-style:italic;"> - the amount of tokens to be issued,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * @memo - the memo string that accompanies the token issue transaction.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          */</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;">[[</span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">action</span><span style="color:#89DDFF;">]]</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">issue</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">to</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">asset</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">quantity</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">memo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         /**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * The opposite for create action, if all validations succeed,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * it debits the statstable.supply amount.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">quantity</span><span style="color:#676E95;font-style:italic;"> - the quantity of tokens to retire,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">memo</span><span style="color:#676E95;font-style:italic;"> - the memo string to accompany the transaction.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          */</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;">[[</span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">action</span><span style="color:#89DDFF;">]]</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">retire</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">asset</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">quantity</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">memo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         /**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * Allows \`from\` account to transfer to \`to\` account the \`quantity\` tokens.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * One account is debited and the other is credited with quantity tokens.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">from</span><span style="color:#676E95;font-style:italic;"> - the account to transfer from,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">to</span><span style="color:#676E95;font-style:italic;"> - the account to be transferred to,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">quantity</span><span style="color:#676E95;font-style:italic;"> - the quantity of tokens to be transferred,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">memo</span><span style="color:#676E95;font-style:italic;"> - the memo string to accompany the transaction.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          */</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;">[[</span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">action</span><span style="color:#89DDFF;">]]</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">transfer</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;">    </span><span style="color:#A6ACCD;font-style:italic;">from</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">                        </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;">    </span><span style="color:#A6ACCD;font-style:italic;">to</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">                        </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">asset</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;">   </span><span style="color:#A6ACCD;font-style:italic;">quantity</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">                        </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;">  </span><span style="color:#A6ACCD;font-style:italic;">memo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         /**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * Allows \`ram_payer\` to create an account \`owner\` with zero balance for</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * token \`symbol\` at the expense of \`ram_payer\`.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">owner</span><span style="color:#676E95;font-style:italic;"> - the account to be created,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">symbol</span><span style="color:#676E95;font-style:italic;"> - the token to be payed with by \`ram_payer\`,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">ram_payer</span><span style="color:#676E95;font-style:italic;"> - the account that supports the cost of this action.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * More information can be read [here](https://github.com/EOSIO/eosio.contracts/issues/62)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * and [here](https://github.com/EOSIO/eosio.contracts/issues/61).</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          */</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;">[[</span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">action</span><span style="color:#89DDFF;">]]</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">open</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">owner</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">symbol</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">symbol</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">ram_payer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         /**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * This action is the opposite for open, it closes the account \`owner\`</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * for token \`symbol\`.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">owner</span><span style="color:#676E95;font-style:italic;"> - the owner account to execute the close action for,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">symbol</span><span style="color:#676E95;font-style:italic;"> - the symbol of the token to execute the close action for.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@pre</span><span style="color:#676E95;font-style:italic;"> The pair of owner plus symbol has to exist otherwise no action is executed,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          * </span><span style="color:#C792EA;font-style:italic;">@pre</span><span style="color:#676E95;font-style:italic;"> If the pair of owner plus symbol exists, the balance has to be zero.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          */</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;">[[</span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">action</span><span style="color:#89DDFF;">]]</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">owner</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">symbol</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">symbol</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#C792EA;">static</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">asset</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">get_supply</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">token_contract_account</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">symbol_code</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">sym_code</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            stats </span><span style="color:#82AAFF;">statstable</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> token_contract_account</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym_code</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">auto</span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> st </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">statstable</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym_code</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">st</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">supply</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#C792EA;">static</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">asset</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">get_balance</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">token_contract_account</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">owner</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">symbol_code</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">sym_code</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            accounts </span><span style="color:#82AAFF;">accountstable</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> token_contract_account</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">owner</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">auto</span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> ac </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">accountstable</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym_code</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ac</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">balance</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#F78C6C;">using</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">create_action</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">action_wrapper</span><span style="color:#89DDFF;">&lt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">create</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">_n</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#FFCB6B;">token</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">create</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#F78C6C;">using</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">issue_action</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">action_wrapper</span><span style="color:#89DDFF;">&lt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">issue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">_n</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#FFCB6B;">token</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">issue</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#F78C6C;">using</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">retire_action</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">action_wrapper</span><span style="color:#89DDFF;">&lt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">retire</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">_n</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#FFCB6B;">token</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">retire</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#F78C6C;">using</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">transfer_action</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">action_wrapper</span><span style="color:#89DDFF;">&lt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">transfer</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">_n</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#FFCB6B;">token</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">transfer</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#F78C6C;">using</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">open_action</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">action_wrapper</span><span style="color:#89DDFF;">&lt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">open</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">_n</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#FFCB6B;">token</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">open</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#F78C6C;">using</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">close_action</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">action_wrapper</span><span style="color:#89DDFF;">&lt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">close</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">_n</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#FFCB6B;">token</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">close</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">private</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#C792EA;">struct</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[[</span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">table</span><span style="color:#89DDFF;">]]</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">account</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            asset    balance</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">uint64_t</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">primary_key</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">balance</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">code</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">();</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#C792EA;">struct</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[[</span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">table</span><span style="color:#89DDFF;">]]</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">currency_stats</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            asset    supply</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            asset    max_supply</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            name     issuer</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">uint64_t</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">primary_key</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">supply</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">code</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">();</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#F78C6C;">typedef</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#F07178;">multi_index</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">accounts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">_n</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> account </span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;"> accounts</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#F78C6C;">typedef</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">eosio</span><span style="color:#89DDFF;">::</span><span style="color:#F07178;">multi_index</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stat</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">_n</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> currency_stats </span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;"> stats</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">sub_balance</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">owner</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">asset</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">add_balance</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">owner</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">asset</span><span style="color:#C792EA;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h2 id="cmakelists-txt" tabindex="-1">CMakeLists.txt <a class="header-anchor" href="#cmakelists-txt" aria-label="Permalink to &quot;CMakeLists.txt&quot;">​</a></h2><div class="language-cmake"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">cmake_minimum_required</span><span style="color:#A6ACCD;">(VERSION 3.5)</span></span>
<span class="line"><span style="color:#89DDFF;">project</span><span style="color:#A6ACCD;">(eosio.token)</span></span>
<span class="line"><span style="color:#89DDFF;">set</span><span style="color:#A6ACCD;">(EOSIO_WASM_OLD_BEHAVIOR </span><span style="color:#C3E88D;">&quot;Off&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">find_package</span><span style="color:#A6ACCD;">(eosio.cdt)</span></span>
<span class="line"><span style="color:#89DDFF;">include</span><span style="color:#A6ACCD;">(EosioWasmToolchain)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">add_contract(eosio.token eosio.token \${CMAKE_CURRENT_SOURCE_DIR}/src/eosio.token.cpp)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">target_include_directories</span><span style="color:#A6ACCD;">(eosio.token</span></span>
<span class="line"><span style="color:#A6ACCD;">   PUBLIC</span></span>
<span class="line"><span style="color:#A6ACCD;">   \${CMAKE_CURRENT_SOURCE_DIR}/include)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">set_target_properties</span><span style="color:#A6ACCD;">(eosio.token</span></span>
<span class="line"><span style="color:#A6ACCD;">   PROPERTIES</span></span>
<span class="line"><span style="color:#A6ACCD;">   RUNTIME_OUTPUT_DIRECTORY </span><span style="color:#C3E88D;">&quot;\${CMAKE_CURRENT_BINARY_DIR}&quot;</span><span style="color:#A6ACCD;">)</span></span></code></pre></div>`,7),t=[p];function e(c,F,y,r,D,i){return n(),a("div",null,t)}const u=s(o,[["render",e]]);export{C as __pageData,u as default};
