import{_ as s,c as a,o as n,L as o}from"./chunks/framework.vEmsHuDM.js";const F=JSON.parse('{"title":"Signing a Transaction","description":"","frontmatter":{"title":"Signing a Transaction","order":7,"outline":[0,4]},"headers":[],"relativePath":"products/ultra-wallet/signing-transaction.md","filePath":"products/ultra-wallet/signing-transaction.md","lastUpdated":null}'),l={name:"products/ultra-wallet/signing-transaction.md"},p=o(`<h1 id="signing-a-transaction" tabindex="-1">Signing a Transaction <a class="header-anchor" href="#signing-a-transaction" aria-label="Permalink to &quot;Signing a Transaction&quot;">​</a></h1><p>Once a web application is connected to the Ultra Wallet, it can prompt the user for permission to sign and push transactions on their behalf.</p><p>The requirements to send a transaction are:</p><h2 id="create-a-transaction-object" tabindex="-1">Create a transaction object <a class="header-anchor" href="#create-a-transaction-object" aria-label="Permalink to &quot;Create a transaction object&quot;">​</a></h2><p>Ultra Wallet has its own format for transaction objects that makes it easy to understand and fulfill. The required fields are “action”, “contract” and “data”.</p><p>Below is a transaction example to send tokens from a user&#39;s blockchain account to another one.</p><div class="language-JSON vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">JSON</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;action&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;transfer&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;contract&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;eosio.token&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;data&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;memo&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;This is a transaction test&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;quantity&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;11.20000000 UOS&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;from&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;ej1vx2ft3ht4&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;to&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;nwyklp2aa1qd&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;action&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;transfer&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;contract&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;eosio.token&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;data&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;memo&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;This is a transaction test&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;quantity&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;11.20000000 UOS&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;from&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;ej1vx2ft3ht4&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;to&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;nwyklp2aa1qd&quot;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="sign-the-transaction-object" tabindex="-1">Sign the transaction object <a class="header-anchor" href="#sign-the-transaction-object" aria-label="Permalink to &quot;Sign the transaction object&quot;">​</a></h2><p>When the transaction object is created, the web application may ask for permission from the Ultra Wallet to sign and send the transaction using <code>signTransaction()</code>. This returns a Promise. If accepted, the wallet will sign the transaction with the user&#39;s private key and submit it to the Ultra blockchain. Conversely, if the user declines the transaction or closes the window, the Promise will return an error.</p><div class="language-JavaScript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">response</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> ultra.</span><span style="color:#B392F0;">signTransaction</span><span style="color:#E1E4E8;">(txObject);</span></span>
<span class="line"><span style="color:#E1E4E8;">  response.data.transactionHash;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 51c6d324522a0ee05baeee2a8857b016e47481207850074ee83f914e6adc45ae</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// { status: &quot;error&quot;, message: &quot;Transaction declined&quot; }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">try</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">response</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> ultra.</span><span style="color:#6F42C1;">signTransaction</span><span style="color:#24292E;">(txObject);</span></span>
<span class="line"><span style="color:#24292E;">  response.data.transactionHash;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 51c6d324522a0ee05baeee2a8857b016e47481207850074ee83f914e6adc45ae</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> (err) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// { status: &quot;error&quot;, message: &quot;Transaction declined&quot; }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>Once the transaction is executed, the transaction hash is returned and it can be validated on the blockchain.</p><h2 id="sign-multiple-transactions-at-the-same-time" tabindex="-1">Sign multiple transactions at the same time <a class="header-anchor" href="#sign-multiple-transactions-at-the-same-time" aria-label="Permalink to &quot;Sign multiple transactions at the same time&quot;">​</a></h2><p>The <code>signTransaction()</code> method accepts one transaction object or an array of them to sign multiple transaction objects in the same transaction. For example, it’s possible to sign a <strong>transfer</strong> and <strong>buy</strong> action in the same transaction as shown in the next example.</p><div class="language-JavaScript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">txArray</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;action&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;transfer&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;contract&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;eosio.token&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;data&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;memo&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;quantity&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;11.20000000 UOS&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;from&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;ej1vx2ft3ht4&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;to&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;nwyklp2aa1qd&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">},</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;action&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;buy&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;contract&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;eosio.nft.ft&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;data&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;buy&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;token_id&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">9974</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;buyer&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;mg1vg2lv3fs4&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;receiver&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;mg1vg2lv3fs4&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;max_price&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;78.00000000 UOS&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;memo&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;promoter_id&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">null</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">response</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> ultra.</span><span style="color:#B392F0;">signTransaction</span><span style="color:#E1E4E8;">(txArray);</span></span>
<span class="line"><span style="color:#E1E4E8;">    response.data.transactionHash;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 51c6d324522a0ee05baeee2a8857b016e47481207850074ee83f914e6adc45ae</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// { status: &quot;error&quot;, message: &quot;Transaction declined&quot; }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">txArray</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;action&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;transfer&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;contract&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;eosio.token&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;data&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;memo&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;quantity&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;11.20000000 UOS&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;from&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;ej1vx2ft3ht4&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;to&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;nwyklp2aa1qd&quot;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">},</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;action&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;buy&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;contract&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;eosio.nft.ft&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;data&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;buy&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;token_id&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">9974</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;buyer&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;mg1vg2lv3fs4&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;receiver&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;mg1vg2lv3fs4&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;max_price&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;78.00000000 UOS&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;memo&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;promoter_id&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">null</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">try</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">response</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> ultra.</span><span style="color:#6F42C1;">signTransaction</span><span style="color:#24292E;">(txArray);</span></span>
<span class="line"><span style="color:#24292E;">    response.data.transactionHash;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 51c6d324522a0ee05baeee2a8857b016e47481207850074ee83f914e6adc45ae</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> (err) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// { status: &quot;error&quot;, message: &quot;Transaction declined&quot; }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div>`,14),t=[p];function e(c,r,E,y,i,u){return n(),a("div",null,t)}const d=s(l,[["render",e]]);export{F as __pageData,d as default};
